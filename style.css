:root{
  --primary:#8B0000; --primary-hover:#B22222; --bg:#F7F7F7; --text:#333; --border:#DDD;
  --radius:10px; --shadow:0 8px 24px rgba(0,0,0,.07);
}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI, Tahoma, Roboto, Arial, sans-serif;background:var(--bg);color:var(--text);line-height:1.35;}

.wrapper{max-width:1080px;margin:28px auto;padding:0 16px}
.pagehead h1{margin:0 0 6px;color:var(--primary)}
.pagehead .sub{margin:0;color:#555}

.topbar{
  position:sticky;top:0;z-index:5;background:#fff;border-bottom:1px solid var(--border);
  display:flex;align-items:center;justify-content:space-between;padding:10px 14px;
}
.brand{display:flex;align-items:center;gap:10px}
.brand-logo{width:28px;height:28px;border-radius:6px}
.brand-title{color:var(--primary);font-weight:700}

.card{
  background:#fff;border:1px solid var(--border);border-radius:var(--radius);
  box-shadow:var(--shadow);padding:18px;margin:18px 0;
}
.card.compact{padding:12px}

h2,h3{margin:0 0 10px;color:var(--primary)}

.btn{
  border:none;border-radius:var(--radius);padding:11px 16px;cursor:pointer;
  font-weight:600;transition:.2s ease;font-size:14px;
}
.btn.primary{background:var(--primary);color:#fff}
.btn.primary:hover{background:var(--primary-hover)}
.btn.secondary{background:#555;color:#fff}
.btn.secondary:hover{background:#666}
.btn.secondary.sm{padding:8px 12px;font-size:12px}
.btn.link{text-decoration:none; display:inline-flex; align-items:center}

.upload-grid{display:grid;gap:14px;grid-template-columns:1fr;}
@media(min-width:840px){.upload-grid{grid-template-columns:1fr 1fr}}

.file{
  position:relative;border:2px dashed var(--primary);border-radius:var(--radius);
  padding:26px;text-align:center;color:var(--primary);transition:.2s ease;
}
.file:hover{background:rgba(139,0,0,.05);border-color:var(--primary-hover)}
.file input[type=file]{position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%}
.file span{pointer-events:none;font-weight:600}

.actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
.msg{color:var(--primary);margin-top:10px;font-weight:600}

.stats-grid{display:grid;gap:10px;grid-template-columns:repeat(5,minmax(160px,1fr));}
.stat{background:#fff;border:1px solid var(--border);border-radius:var(--radius);padding:12px;text-align:center}
.company-info{margin-top:10px;font-size:14px}

table{width:100%;border-collapse:collapse;font-size:14px}
th,td{padding:8px;border-bottom:1px solid var(--border);text-align:left}
th{background:var(--primary);color:#fff}
tbody tr:hover{background:rgba(139,0,0,.05)}

.hidden{display:none}

/* ===== upload feedback ===== */
.file.dragover{
  background: rgba(139,0,0,.08);
  border-color: var(--primary-hover);
  box-shadow: 0 0 0 3px rgba(178,34,34,.15) inset;
  animation: pulse 0.9s ease-in-out infinite;
}
@keyframes pulse{ 0%{transform:scale(1)} 50%{transform:scale(1.01)} 100%{transform:scale(1)} }

.file.filled{
  border-color:#22c55e; box-shadow:0 0 0 3px rgba(34,197,94,.15) inset, var(--shadow);
  background:#f6fffa;
}
.file.anim{ animation: pop-in .18s ease; }
@keyframes pop-in{ 0%{transform:scale(0.98)} 100%{transform:scale(1)} }

.file.filled::after{
  content:""; position:absolute; right:10px; top:10px;
  width:14px; height:7px; border:3px solid #22c55e; border-top:0; border-right:0; transform: rotate(-45deg);
}
.file .file-meta{
  margin-top:8px; display:flex; align-items:center; justify-content:center; gap:8px;
}
.file .name{
  max-width:90%; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-weight:600; color:#333;
}
.file .count{
  font-size:12px; color:#666; padding:2px 6px; border:1px solid var(--border);
  border-radius:999px; background:#fff;
}

/* Progress */
.progress{height:4px;background:#eee;border-radius:6px;overflow:hidden;margin-top:12px}
.indeterminate{position:relative;height:100%;background:linear-gradient(90deg, rgba(139,0,0,.1), rgba(139,0,0,.6), rgba(139,0,0,.1));animation:ind 1.2s infinite}
@keyframes ind{0%{left:-40% ;width:40%}50%{left:20%;width:60%}100%{left:100%;width:40%}}

/* Modal DANFE */
.modal{
  position:fixed; inset:0; background:rgba(0,0,0,.45);
  display:flex; align-items:center; justify-content:center; z-index:1000;
}
.modal.hidden{ display:none; }
.modal-dialog{
  background:#fff; border:1px solid var(--border); border-radius:var(--radius);
  width:min(900px, 95vw); max-height:90vh; overflow:auto; box-shadow:var(--shadow);
}
.modal-head{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding:12px 16px; border-bottom:1px solid var(--border);
}
.modal-body{ padding:12px 16px; }
.hint{ color:#666; font-size:12px }

/* lista DANFE */
.danfe-list{ display:grid; gap:10px; }
.danfe-card{ border:1px solid var(--border); border-radius:var(--radius); padding:10px; background:#fafafa; }
.danfe-card h4{ margin:0 0 6px; color:#333 }
.danfe-card .meta{ font-size:13px; color:#555; display:flex; gap:12px; flex-wrap:wrap; }
.danfe-card .row{ display:flex; gap:8px; align-items:center; margin-top:8px; }
.danfe-card .row .btn{ padding:8px 10px; }
